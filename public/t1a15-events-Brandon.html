<html lang="en">
<head>
    <style>
        .key {
            display: inline-block;
            width: 40px;
            height: 40px;
            margin: 5px;
            text-align: center;
            line-height: 40px;
            border: 1px solid #000;
            border-radius: 5px;
            background-color: #f0f0f0;
            font-size: 16px;
        }

        .key.active {
            background-color: yellow;
        }

        .keyboard {
            display: flex;
            flex-wrap: wrap;
            max-width: 500px;
        }
    </style>
</head>
<body>
    <h1 align="center">t2a06-spy-name.html</h1>

    <textarea id="myArea01" rows="4" cols="70">Hello how are you?</textarea><br> 

    <input type="button" value="Encrypt" onclick="{
        let myTemp = '';
        let myString = document.getElementById('myArea01').value.split('');
        let encrypted = '';

        for (let myLoop = 0; myLoop < myString.length; myLoop++) {
            myTemp = myString[myLoop];
            let charCode = myTemp.charCodeAt(0);
            if ((charCode >= 32 && charCode <= 126)) { // Encrypt for printable ASCII range
                charCode = ((charCode - 32 + 5) % 95) + 32;
            }
            encrypted += String.fromCharCode(charCode);
        }

        document.getElementById('myArea02').value = encrypted;
    }"><br><br>

    <textarea id="myArea02" rows="4" cols="70"></textarea><br> 

    <input type="button" value="Decrypt" onclick="{
        let myTemp = '';
        let myString = document.getElementById('myArea02').value.split('');
        let decrypted = '';

        for (let myLoop = 0; myLoop < myString.length; myLoop++) {
            myTemp = myString[myLoop];
            let charCode = myTemp.charCodeAt(0);
            if ((charCode >= 32 && charCode <= 126)) { // Decrypt for printable ASCII range
                charCode = ((charCode - 32 - 5 + 95) % 95) + 32;
            }
            decrypted += String.fromCharCode(charCode);
        }

        document.getElementById('myArea03').value = decrypted;
    }"><br><br>

    <textarea id="myArea03" rows="4" cols="70"></textarea><br><br>

    <div class="keyboard" id="keyboard"></div>

    <script>
        // Create keyboard dynamically for printable ASCII characters
        const keyboardContainer = document.getElementById('keyboard');

        for (let i = 32; i <= 126; i++) {
            const key = document.createElement('div');
            key.classList.add('key');
            key.textContent = String.fromCharCode(i);
            key.id = `key-${i}`;
            keyboardContainer.appendChild(key);
        }

        // Highlight key on keypress
        document.addEventListener('keydown', (event) => {
            const keyId = `key-${event.key.charCodeAt(0)}`;
            const keyElement = document.getElementById(keyId);
            if (keyElement) {
                keyElement.classList.add('active');
            }
        });

        // Remove highlight on keyup
        document.addEventListener('keyup', (event) => {
            const keyId = `key-${event.key.charCodeAt(0)}`;
            const keyElement = document.getElementById(keyId);
            if (keyElement) {
                keyElement.classList.remove('active');
            }
        });
    </script>
</body>
</html>
